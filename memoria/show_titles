if [[ -z "$1" ]]; then
  DIR="."
else
  DIR="${1%\/}"
fi

find "$DIR" -type f | while read infile; do
  echo "$infile"
  title=`ffmpeg -i "$infile" 2>&1 | grep "^\s\{4\}title"`
  if [[ -z "$title" ]]; then
    echo "-- no title --"
  else
    echo "$title"
  fi
done
